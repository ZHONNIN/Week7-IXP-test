<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rewrite Me: Fixed Blanks Edition</title>
  <link rel="stylesheet" href="style.css">
</head>
<body data-theme="default">

  <!-- INTRO PANEL -->
  <section id="intro-panel" class="panel active">
    <div class="intro-content">
      <h1 class="main-title">Rewrite Me</h1>
      <p class="subtitle">Fixed Blanks Edition</p>
      <p class="intro-description">
        A story with selective memory.<br>
        Only certain words can changeâ€”choose them carefully.
      </p>
      <button id="begin-btn" class="primary-btn">Begin</button>
    </div>
  </section>

  <!-- EDITOR PANEL -->
  <section id="editor-panel" class="panel">
    <div class="editor-content">

      <!-- Controls Top Bar -->
      <div class="controls-bar">
        <div class="chips-container" id="chips-container">
          <!-- Chips will be dynamically populated -->
        </div>
        <div class="control-buttons">
          <button id="randomize-btn" class="secondary-btn" title="Fill with random valid options">Randomize</button>
          <button id="reset-btn" class="secondary-btn" title="Clear all selections">Reset</button>
        </div>
      </div>

      <!-- Story Text with Inline Inputs -->
      <div class="story-container">
        <div class="story-text">
          <p>I still remember that morning, though some details keep changing.</p>
          <p>We met on a
            <span class="blank-wrapper">
              <input
                type="text"
                id="blank1"
                class="blank-input"
                list="time-options"
                placeholder="time"
                aria-label="Choose time of day"
                data-blank="TIME"
                autocomplete="off"
                spellcheck="false"
              >
              <span class="validation-tooltip">Choose from the list</span>
            </span>
            at the
            <span class="blank-wrapper">
              <input
                type="text"
                id="blank2"
                class="blank-input"
                list="place-options"
                placeholder="place"
                aria-label="Choose place"
                data-blank="PLACE"
                autocomplete="off"
                spellcheck="false"
              >
              <span class="validation-tooltip">Choose from the list</span>
            </span>.
          </p>
          <p>You were
            <span class="blank-wrapper">
              <input
                type="text"
                id="blank3"
                class="blank-input"
                list="verb-options"
                placeholder="action"
                aria-label="Choose action"
                data-blank="VERB"
                autocomplete="off"
                spellcheck="false"
              >
              <span class="validation-tooltip">Choose from the list</span>
            </span>
            while I held a small
            <span class="blank-wrapper">
              <input
                type="text"
                id="blank4"
                class="blank-input"
                list="object-options"
                placeholder="object"
                aria-label="Choose object"
                data-blank="OBJECT"
                autocomplete="off"
                spellcheck="false"
              >
              <span class="validation-tooltip">Choose from the list</span>
            </span>.
          </p>
          <p>When the curtain moved, we decided to
            <span class="blank-wrapper">
              <input
                type="text"
                id="blank5"
                class="blank-input"
                list="decision-options"
                placeholder="decision"
                aria-label="Choose decision"
                data-blank="DECISION"
                autocomplete="off"
                spellcheck="false"
              >
              <span class="validation-tooltip">Choose from the list</span>
            </span>.
          </p>
        </div>
      </div>

      <!-- Generate Button -->
      <div class="generate-container">
        <button id="generate-btn" class="primary-btn" disabled>Generate Ending</button>
        <p class="hint-text">Fill all blanks with valid options to continue</p>
      </div>

      <!-- Datalists for constrained options -->
      <datalist id="time-options">
        <option value="morning">
        <option value="midnight">
        <option value="rainy evening">
      </datalist>

      <datalist id="place-options">
        <option value="station">
        <option value="river">
        <option value="museum">
      </datalist>

      <datalist id="verb-options">
        <option value="waiting">
        <option value="running">
        <option value="hiding">
      </datalist>

      <datalist id="object-options">
        <option value="map">
        <option value="letter">
        <option value="key">
      </datalist>

      <datalist id="decision-options">
        <option value="stay">
        <option value="leave">
        <option value="begin again">
      </datalist>

    </div>
  </section>

  <!-- ENDING PANEL -->
  <section id="ending-panel" class="panel">
    <div class="ending-content">
      <h2 class="ending-title">Your Edited Story</h2>

      <!-- Final Story -->
      <div class="final-story" id="final-story">
        <!-- Populated by JavaScript -->
      </div>

      <!-- Summary Card -->
      <div class="summary-card" id="summary-card">
        <!-- Populated by JavaScript -->
      </div>

      <!-- Ending Paragraph -->
      <div class="ending-paragraph" id="ending-paragraph">
        <!-- Populated by JavaScript -->
      </div>

      <!-- Action Buttons -->
      <div class="ending-actions">
        <button id="copy-btn" class="secondary-btn">Copy Story</button>
        <button id="edit-again-btn" class="secondary-btn">Edit Again</button>
        <button id="save-json-btn" class="secondary-btn">Save JSON</button>
      </div>
    </div>
  </section>

  <script src="script.js"></script>
</body>
</html>
