<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rewrite Me: An Editable Story</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Main Container -->
    <div id="app">

        <!-- INTRO PANEL -->
        <section id="intro-panel" class="panel active">
            <div class="intro-content">
                <h1 class="main-title">Rewrite Me</h1>
                <p class="subtitle">An Editable Story</p>
                <p class="intro-description">
                    A story changes with every word you add or delete.<br>
                    Watch the mood shift. See where your edits lead.
                </p>
                <button id="start-btn" class="btn-primary" aria-label="Start the story">Begin</button>
            </div>
        </section>

        <!-- EDITOR PANEL -->
        <section id="editor-panel" class="panel">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="title-section">
                    <h2>Rewrite Me</h2>
                </div>
                <div class="controls-section">
                    <div id="mood-badge" class="mood-badge" aria-live="polite">
                        <span class="mood-label">NEUTRAL</span>
                    </div>
                    <label class="toggle-control">
                        <input type="checkbox" id="sound-toggle" aria-label="Toggle sound effects">
                        <span class="toggle-label">Sound</span>
                    </label>
                    <button id="reset-btn" class="btn-secondary" aria-label="Reset story">Reset</button>
                    <button id="generate-ending-btn" class="btn-primary" aria-label="Generate ending">Generate Ending</button>
                </div>
            </header>

            <!-- Editor Area -->
            <div class="editor-container">
                <p class="instruction-text">Delete or add words. Your edits change the mood.</p>

                <div
                    id="story"
                    class="story-editor"
                    contenteditable="true"
                    spellcheck="false"
                    role="textbox"
                    aria-label="Editable story text"
                    aria-multiline="true"
                ></div>

                <!-- Edit Log -->
                <div class="edit-log-container">
                    <h3 class="section-label">Recent Changes</h3>
                    <div id="edit-log" class="edit-log" aria-live="polite" aria-atomic="false"></div>
                </div>

                <!-- Stats -->
                <div id="stats" class="stats-line" aria-live="polite">
                    Added: <span id="stat-added">0</span> ·
                    Removed: <span id="stat-removed">0</span> ·
                    Unique words: <span id="stat-unique">0</span>
                </div>
            </div>
        </section>

        <!-- ENDING PANEL -->
        <section id="ending-panel" class="panel">
            <div class="ending-container">
                <h2 class="ending-title">Your Story's Ending</h2>

                <div id="ending-summary" class="ending-summary"></div>

                <div id="ending-text" class="ending-text"></div>

                <!-- Configuration Card -->
                <div class="config-card">
                    <div class="config-header">Story Configuration</div>
                    <div id="config-mood" class="config-mood-strip"></div>
                    <div id="config-words" class="config-words"></div>
                    <div id="config-stats" class="config-stats"></div>
                </div>

                <!-- Action Buttons -->
                <div class="ending-actions">
                    <button id="copy-text-btn" class="btn-secondary" aria-label="Copy final text">Copy Final Text</button>
                    <button id="download-json-btn" class="btn-secondary" aria-label="Download JSON">Download JSON</button>
                    <button id="edit-again-btn" class="btn-primary" aria-label="Edit again">Edit Again</button>
                </div>
            </div>
        </section>

        <!-- Toast Notification -->
        <div id="toast" class="toast" role="alert" aria-live="polite"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
